<!DOCTYPE html>
<html>
<head>
    <title>Registration Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
<div class="container">

</div>
<div class="container login-wrapper">
    <div class="row">
        <div class="col-md-3">
        </div>
        <div class="col-md-6">
            <h2 class="display-6 mb-4">Registration Form</h2>
            <form action="/register" onsubmit="return false" id="register_form" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="firstname">First Name:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Enter First Name">
                    </div>
                </div>
                <div class="form-group">
                    <label for="lastname">Last Name:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Enter Surname">
                    </div>
                </div>
                <div class="form-group">
                    <label for="email">Email address:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
                    </div>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="tel" class="form-control" id="phone" name="phone" placeholder="Enter Phone Number">
                    </div>
                </div>
                <div class="form-group">
                    <label for="nickname">Nickname:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="text" class="form-control" id="nickname" name="nickname" placeholder="Enter Nickname">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <div class="input-group mb-3 input-group-lg">
                        <input type="password" class="form-control" id="password" name="password" placeholder="Enter Password">
                    </div>
                </div>
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-lg btn-primary btn-block">Register</button>
                    <a href="/" class="btn btn-outline-primary btn-block">
                        Back
                    </a>
                </div>
            </form>
            <div id="error"></div>
            {% if messages or message %}
            {% for message in messages %}
            <div class="alert alert-danger mt-4" role="alert">
                {{ message }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% endfor %}
            {% endif %}
        </div>
        <div class="col-md-3">
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
        crossorigin="anonymous"></script>
<script>
    $("#register_form").on("submit", function (event) {
        event.preventDefault();

        const passwordInput = $('#password');
        const password = passwordInput.val();

        const regex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#\$%\^&\*])(?=.{8,})");
        const errorElement = $('#error')[0];
        errorElement.innerHTML = "";
        if (regex.test(password)) {
            this.submit();
        } else {
            console.log(errorElement);
            errorElement.innerHTML = ('<div class="alert alert-danger alert-dismissible mt-4" role="alert">' +
                'Password must consist at least 1 Uppercase, 1 lowercase letter, and length must be at least 8' +
                '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                '<span aria-hidden="true">&times;</span>' +
                '</button>' +
                '</div>');
        }
    });
</script>
<!-- Bootstrap JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>
